<!DOCTYPE html>
<html>

<head>
	<script src="../jspsych/jspsych.js"></script>
	<script src="../jspsych/plugins/jspsych-survey-html-form.js"></script>
	<link rel="stylesheet" href="../jspsych/css/jspsych.css">
	</script>
	<script type="text/javascript" src="../libraries/utils.js"></script>
</head>

<body>

</body>
<script type="text/javascript">

	// TODO FRANK: move this function to utils.js too; again, make it modular; this function should only create country options; it shouldn't do anything else (and remember to use var when defining variables to ensure they're not global variables)
	// TODO Frank: try to always pass in parameter values and avoid using global variables
	function create_country_options(country_info) { 
		var start = '<p> I am feeling <input list="countries" name="countries"><datalist id="countries">'; // TODO FRANK doesn't belong to this function!
		var middle = '' // TODO FRANK doesn't belong to this function!
		country_info.forEach(function(c) {
			middle = middle.concat('<option value="');
			middle = middle.concat(c.country);
			middle = middle.concat('">');
		})
		end = '</datalist>.</p>' // TODO FRANK doesn't belong to this function!
		return start + middle + end // TODO FRANK doesn't belong to this function!
	}

	var form_trial = {
		type: 'survey-html-form',
		preamble: '<p> How are you feeling <b>right now?</b> </p>',
		html: create_country_options() // TODO Frank: do the concatenating here 
	} 
	// TODO Frank: map the country to alpha2 value; call this function at the end of the trial, and save the corresponding alpha2 value to jspsych's data (i.e., save both the country name and alpha2 value)

	// https://www.w3schools.com/html/tryit.asp?filename=tryhtml_elem_datalist
	// https://www.w3schools.com/html/html_form_elements.asp
	// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input
	// https://www.jspsych.org/plugins/jspsych-survey-html-form/

	jsPsych.init({
		timeline: [form_trial],
		on_finish: function () { jsPsych.data.displayData(); }
	});

</script>

</html>